{% set uri = app.request.server.get("PHP_SELF")| split ('php',2)  %}

<nav class="navbar navbar-expand-lg navbar-light bg-dark ">
  <div class="container-fluid">
   <a class="navbar-brand" href="#"> <img src="{{asset ('uploads/'~ general[0].illustration)  | imagine_filter('logo') }}" class='logoIF rounded' alt='Logo de la salle de sport'></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav me-auto mb-2 ">
        <li class="nav-item px-3">  
       
          <a {% if uri[1] == "" %} class="nav-link active" {% else %} class= "nav-link"
            {% endif %} href="{{path ('app_home')}}" >Accueil</a>
        </li>
        <li class="nav-item px-3">
          <a {% if uri[1] == "/coaching" %} class="nav-link active" {% else %} class= "nav-link"
            {% endif %} href="{{path ('app_coaching')}}">Coaching</a>
        </li>
        <li class="nav-item px-3">
          <a {% if uri[1] == "/cours-collectifs" %} class="nav-link active" {% else %} class= "nav-link"
            {% endif %}  href="{{path ('app_collective_lesson')}}">Cours collectif</a>
        </li>
        <li class="nav-item px-3">
          <a class="nav-link planning"   data-bs-toggle="modal" data-bs-target="#modalPlanning" >Planning</a>
        </li>
        <li class="nav-item px-3">
        <a {% if uri[1] == "/articles" %} class="nav-link active" {% else %} class= "nav-link"
            {% endif %}href="{{path ('app_blog')}}">Blog </a>
        </li>
        
         {% if is_granted('ROLE_ADMIN') %}
              <a href='{{path ('admin')}}' class="btn btn-primary " > Tableau de bord </a>
          {% endif %}

          {% if is_granted('ROLE_COACH') %}
              {% if app.user.roles[0] == 'ROLE_COACH' %}
              <a href="{{ path ('admin')}}" class="btn btn-info text-white " >  Construire un programme </a>
              {% endif %}
          {% endif %}
      </ul>  
        
        {% if not is_granted('IS_AUTHENTICATED_FULLY') %} 
              <a  class="btn btn-outline-info  mb-2 me-3" data-bs-toggle="modal" data-bs-target="#modalFreeSession" >Tester une séance gratuite </a> 
              <a href='{{path ('app_login')}}' class="btn btn-outline-primary me-3 mb-2" data-bs-toggle="tooltip" data-bs-title="Default tooltip">Connexion</a>
              <a href='{{path ('app_register')}}' class="btn btn-outline-warning  mb-2" >S'inscrire</a>
         
           {% else %}           
              <a class="btn btn-outline-warning me-3" href="{{path ('app_profil')}}">Profil</a>
              <a class="btn btn-outline-danger" href="{{path ('app_logout')}}">Déconnexion</a>                      
          {% endif %}  
          
            
               
    </div>
  </div>

</nav>

{# NOTE 
{% "app.request.attributes.get('_route')" renvoie le nom de la route (app_home si on est sur l'accueil par exemple) #}


{# MODAL PLANNING #}
<div class="modal fade" id="modalPlanning" tabindex="-1" aria-labelledby="modalPlanning" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title ms-5 fs-2 text-warning text-style" id="modalPlanning">Planning {{general[0].nameSite}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img src="{{asset ('uploads/'~ general[0].planning )}}" alt="Planning de la salle de sport" class="img-fluid">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>        
      </div>
    </div>
  </div>
</div>

{# MODAL SEANCE GRATUITE #}

  {{ form_start(form, {'attr': {'id': 'FreeSession', novalidate:'novalidate'}} ) }} 
   
  <div class="modal fade" id="modalFreeSession" tabindex="-1" aria-labelledby="modalFreeSession" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title mx-auto text-family fs-2 text-style text-warning " id="modalFreeSession">Tester une séance gratuite</h5>
        <button type="button" class="btn-close m-0" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
     
      <div class=" p-5 ">
         <div id="form-errors" class="alert alert-danger d-none"></div>
        <div class="col-md-2">
        {{ form_label(form.sexe) }}
        </div>
        <div class="col-md-10 text-center py-2">
        {{ form_widget(form.sexe)}}    
        </div> <br>
      
        {{ form_row(form.nom) }}
        {{ form_row(form.prenom) }}               
        {{ form_row(form.email) }}
        {{ form_row(form.numTelephone) }} 
              
        {{form_row(form.datePresence)}}
        <button class="btn btn-warning mt-3 col-md-12  mx-auto text-white" type="submit" >Enregistrer ma séance </button> 
        {{ form_rest(form) }}
        {{ form_end(form) }}      
        </div>
      
      </div>
      
      
    </div>
  </div>
</div>  
